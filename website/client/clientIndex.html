<!-- 
   ==============================================
   MINIMORPHIC — client interface [html, css, js]
   ==============================================

   OLD, REPLACED BY root/transitionIndex.html 
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINIMORPHIC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Instrument+Sans:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        .project-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0 20px 0;
        }

        .tab-btn {
            padding: 12px 24px;
            border: 2px solid #e8ddd0;
            background: #fdfbf8;
            color: #8b6f47;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: 'Instrument Sans', sans-serif;
        }

        .tab-btn:hover {
            border-color: #d4a574;
            background: #f9f3eb;
        }

        .tab-btn.active {
            background: #d4a574;
            border-color: #d4a574;
            color: white;
        }
    </style>
</head>

<body>
    <div class="grid-bg"></div>

    <div class="container">
        <header>
            <div class="logo-wrapper" style="transform: rotate(-1deg);">
                <img src="branding/TextLogoNoBG.png" alt="MINIMORPHIC">
            </div>
            <div class="tagline">// building something different</div>
        </header>

        <div
            style=" position:fixed;top:18px;left:20px;font-size:13px;color:#8b6f47;font-family:'JetBrains Mono', monospace;opacity:.85;">
            <span id="mmUserLabel"></span>
        </div>

        <button onclick="mmLogout()" style="position:fixed;top:14px;right:18px;padding:8px 12px;border-radius:10px;border:none;background:#e88b9a;color:white;font-weight:600;cursor:pointer;font-size:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);
">
            [ End Session ]
        </button>

        <div class="project-tabs">
            <button class="tab-btn active" data-project="slate">SLATE</button>
            <button class="tab-btn" data-project="desk">2026 Desk Project</button>
        </div>

        <section class="hero">
            <div class="sketch-element sketch-arrow"></div>
            <h1 id="hero-title">Building <span class="highlight">SLATE</span>, one iteration at a time</h1>
            <p id="hero-description">A devlog documenting the journey of creating a custom laptop from scratch. No
                corporate polish, just
                honest progress, experiments, and the occasional breakthrough.</p>
        </section>

        <section class="updates-section">
            <h2 class="section-title">Recent Updates</h2>

            <div class="update-cards" id="update-cards">
                <!-- 
                <div class="card" style="transform: translateY(0px);"
                    onclick="window.location.href='updates/Update1.html';">
                    <span class="card-tag">DEBUG ONE</span>
                    <h3>Debug Card #1</h3>
                    <p>Just some text here.</p>
                    <div class="card-date">Day, Month, Year | 12:Hr Time</div>
                </div> 
                -->
            </div>
        </section>

        <section class="phases-section">
            <h2 class="section-title">Development Phases</h2>
            <div id="phases-container" class="phases-container">
                <div class="phase-block in-progress" style="animation-delay: 0s;">
                    <div class="phase-header">
                        <div class="phase-info">
                            <span class="phase-tag">DEBUG PHASE #</span>
                            <h3>Debug Phase Title</h3>
                        </div>
                        <span class="phase-status-badge in-progress">in progress or sum idk</span>
                    </div>
                    <div class="steps-list">
                        <a href="projects/SLATE/phases/phaseOne/stepOne.html" class="step-item complete" style="animation-delay: 0s">
                            <span class="step-status">✓</span>
                            <div class="step-content">
                                <h4>Debug Step Title</h4>
                                <p>Debug Description</p>
                                <span class="step-date">Date</span>
                            </div>
                        </a>

                    </div>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <h2>Want to follow along?</h2>
            <p>Updates are irregular but honest. No marketing speak, just the real process.</p>
            <a href="#" class="btn">Subscribe to Updates</a>
        </section>

        <footer>
            <p>MINIMORPHIC © 2026 • Built with curiosity and spite</p>
            <br>
            <div class="social-links" style="display:flex;gap:20px;justify-content:center;">
                <a href="https://github.com/Chaotic-Mess/MINIMORPHIC?tab=readme-ov-file" target="_blank"
                    aria-label="GitHub">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-github">
                        <path
                            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 18 4.77 5.07 5.07 0 0 0 18.09 1s-1.18-.35-3.91 1.36A13.38 13.38 0 0 0 12 3.27a13.38 13.38 0 0 0-2.18-.91C7.09.65 5.91 1 5.91 1A5.07 5.07 0 0 0 6 4.77 5.44 5.44 0 0 0 4.5 9c0 5.42 3.3 6.61 6.44 7a3.37 3.37 0 0 0-.94 2.61V22">
                        </path>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/zacmatthias/" target="_blank" aria-label="LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-linkedin">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-4 0v7h-4v-7a6 6 0 0 1 6-6z"></path>
                        <rect x="2" y="9" width="4" height="12"></rect>
                        <circle cx="4" cy="4" r="2"></circle>
                    </svg>
                </a>
                <a href="https://www.instagram.com/zacmatthias_/" target="_blank" aria-label="Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-instagram">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
            </div>
        </footer>
    </div>

    <script>
        // Add slight parallax effect to cards on scroll
        document.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                const speed = 0.5 + (index * 0.1);
                card.style.transform = `translateY(${scrolled * speed * 0.01}px)`;
            });
        });

        // Add subtle rotation animation on hover for logo
        const logo = document.querySelector('.logo-wrapper');
        logo.addEventListener('mousemove', (e) => {
            const rect = logo.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const rotateX = (y - centerY) / 20;
            const rotateY = (centerX - x) / 20;
            logo.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        });

        logo.addEventListener('mouseleave', () => {
            logo.style.transform = 'rotate(-1deg)';
        });

        // Project data
        const projectData = {
            slate: {
                heroTitle: 'Building <span class="highlight">SLATE</span>, one iteration at a time',
                heroDesc: 'A devlog documenting the journey of creating a custom laptop from scratch. No corporate polish, just honest progress, experiments, and the occasional breakthrough.',
                updates: [
                    {
                        tag: 'CREATION',
                        title: 'Founding',
                        desc: 'Created a dream. MINIMORPHIC has officially begun its journey.',
                        date: 'Jan 30, 2026 | 11:50pm',
                        url: 'projects/SLATE/updates/Update1.html'
                    }, 
                ],
                phases: [
                    {
                        id: 'phaseOne',
                        title: 'Phase One',
                        subtitle: 'Foundation & Brain Selection',
                        status: 'in-progress',
                        steps: [
                            {
                                id: 'stepOne',
                                title: 'Reality Check (Prototype Brain)',
                                description: 'Choosing the development brain that lets us design the object.',
                                date: 'Jan 30, 2026',
                                status: 'complete',
                                url: 'projects/SLATE/phases/phaseOne/stepOne.html'
                            }
                        ]
                    }
                ]
            },
            desk: {
                heroTitle: 'Building the <span class="highlight">2026 Desk Project</span>, one phase at a time',
                heroDesc: 'A devlog documenting the journey of creating an L-shaped electric sit/stand desk with advanced AV control for three monitors, Xbox, desktop, and laptop. Clean cable management, flexible monitor switching, and a modular design for future upgrades.',
                updates: [
                    {
                        tag: 'PLANNING',
                        title: 'Updated Plan & Architecture',
                        desc: 'Finalized the system architecture using HDMI switches instead of a matrix for cost-effective flexibility.',
                        date: 'Feb 10, 2026 | Planning Phase',
                        url: 'projects/DeskProject/updates/Update1.html'
                    }
                ],
                phases: [
                    {
                        id: 'phaseOne',
                        title: 'Phase One',
                        subtitle: 'Planning & Procurement',
                        status: 'in-progress',
                        steps: [
                            {
                                id: 'stepOne',
                                title: 'System Architecture Design',
                                description: 'Defined the HDMI switching system with 3 independent switches for monitor control.',
                                date: 'Feb 10, 2026',
                                status: 'complete',
                                url: 'projects/DeskProject/phases/phaseOne/stepOne.html'
                            },
                            {
                                id: 'stepTwo',
                                title: 'Hardware Procurement',
                                description: 'Purchase HDMI switches, splitter, cables, and adapters from Amazon.',
                                date: 'Pending',
                                status: 'in-progress',
                                url: 'projects/DeskProject/phases/phaseOne/stepTwo.html'
                            },
                            {
                                id: 'stepThree',
                                title: 'Desk Frame Assembly',
                                description: 'Build the L-shaped electric sit/stand desk base.',
                                date: 'Pending',
                                status: 'pending',
                                url: 'projects/DeskProject/phases/phaseOne/stepThree.html'
                            },
                            {
                                id: 'stepFour',
                                title: 'Cable Management Setup',
                                description: 'Install hidden cable routing and mount switches/splitter under desk.',
                                date: 'Pending',
                                status: 'pending',
                                url: 'projects/DeskProject/phases/phaseOne/stepFour.html'
                            }
                        ]
                    },
                    {
                        id: 'phaseTwo',
                        title: 'Phase Two',
                        subtitle: 'Integration & Testing',
                        status: 'planned',
                        steps: [
                            {
                                id: 'stepOne',
                                title: 'AV System Wiring',
                                description: 'Connect all devices through the switching system.',
                                date: 'Future',
                                status: 'pending',
                                url: '#'
                            },
                            {
                                id: 'stepTwo',
                                title: 'Functionality Testing',
                                description: 'Test all modes: gaming, work, laptop, mixed configurations.',
                                date: 'Future',
                                status: 'pending',
                                url: '#'
                            }
                        ]
                    },
                    {
                        id: 'phaseThree',
                        title: 'Phase Three',
                        subtitle: 'Automation & Enhancements',
                        status: 'planned',
                        steps: [
                            {
                                id: 'stepOne',
                                title: 'Arduino Control Integration',
                                description: 'Add automated switching with presets for gaming, work, etc.',
                                date: 'Future',
                                status: 'pending',
                                url: '#'
                            },
                            {
                                id: 'stepTwo',
                                title: 'Touchscreen Interface',
                                description: 'Install display panel under monitors for status and control.',
                                date: 'Future',
                                status: 'pending',
                                url: '#'
                            }
                        ]
                    }
                ]
            }
        };

        // Switch project function
        function switchProject(project) {
            // Update tabs
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-project="${project}"]`).classList.add('active');

            // Save current project to localStorage
            localStorage.setItem('mm_current_project', project);

            // Update hero
            document.getElementById('hero-title').innerHTML = projectData[project].heroTitle;
            document.getElementById('hero-description').textContent = projectData[project].heroDesc;

            // Update updates
            const cardsContainer = document.getElementById('update-cards');
            cardsContainer.innerHTML = projectData[project].updates.map((update, index) => `
                <div class="card" style="transform: translateY(0px);" onclick="window.location.href='${update.url}';">
                    <span class="card-tag">${update.tag}</span>
                    <h3>${update.title}</h3>
                    <p>${update.desc}</p>
                    <div class="card-date">${update.date}</div>
                </div>
            `).join('');

            // Render phases
            renderPhases(projectData[project].phases);
        }

        // Tab event listeners
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const project = btn.getAttribute('data-project');
                switchProject(project);
            });
        });

        function getStatusIcon(status) {
            switch (status) {
                case 'complete': return '✓';
                case 'in-progress': return '→';
                default: return '○';
            }
        }

        function renderPhases(phases) {
            const container = document.getElementById('phases-container');
            container.innerHTML = '';

            phases.forEach((phase, phaseIndex) => {
                const phaseEl = document.createElement('div');
                phaseEl.className = `phase-block ${phase.status}`;
                phaseEl.style.animationDelay = `${phaseIndex * 0.1}s`;

                const stepsHtml = phase.steps.map((step, stepIndex) => `
                    <a href="${step.url}" class="step-item ${step.status}" style="animation-delay: ${(phaseIndex * 0.1) + (stepIndex * 0.05)}s">
                        <span class="step-status">${getStatusIcon(step.status)}</span>
                        <div class="step-content">
                            <h4>${step.title}</h4>
                            <p>${step.description}</p>
                            <span class="step-date">${step.date}</span>
                        </div>
                    </a>
                `).join('');

                phaseEl.innerHTML = `
                    <div class="phase-header">
                        <div class="phase-info">
                            <span class="phase-tag">${phase.title}</span>
                            <h3>${phase.subtitle}</h3>
                        </div>
                        <span class="phase-status-badge ${phase.status}">${phase.status.replace('-', ' ')}</span>
                    </div>
                    <div class="steps-list">
                        ${stepsHtml}
                    </div>
                `;

                container.appendChild(phaseEl);
            });
        }

        // Show logged in username
        document.addEventListener("DOMContentLoaded", () => {
            const label = document.getElementById("mmUserLabel");
            if (label && window.MM_USER) {
                label.textContent = "// signed in as " + window.MM_USER;
            }
        });

        // Logout function
        function mmLogout() {
            localStorage.removeItem("mm_session");
            sessionStorage.removeItem("mm_animations_played");
            localStorage.removeItem("mm_current_project");
            window.location.href = "../index.html";
        }


        // Load default project on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedProject = localStorage.getItem('mm_current_project') || 'slate';
            switchProject(savedProject);
        });
    </script>

    <script>
        (function(){
            const KEY = 'mm_animations_played';
            function getStore(){ try{ return JSON.parse(sessionStorage.getItem(KEY))||{} }catch{ return {}; } }
            function setStore(s){ sessionStorage.setItem(KEY, JSON.stringify(s)); }
            function genId(el,i){
                if(el.dataset.animId) return el.dataset.animId;
                const path = location.pathname;
                const base = (el.id || el.className || el.tagName).toString().replace(/\s+/g,'_');
                const raw = `${path}::${base}::${i}`;
                const id = btoa(encodeURIComponent(raw));
                el.dataset.animId = id;
                return id;
            }

            function processFades(root=document){
                const store = getStore();
                // Collect elements that either have .fade or a computed CSS animation
                const fades = [];
                if(root.querySelectorAll){
                    // elements explicitly marked
                    root.querySelectorAll('.fade').forEach(el=>fades.push(el));
                    // elements with classes (limit scope) — check computed style for animation
                    root.querySelectorAll('[class]').forEach(el=>{
                        if(fades.indexOf(el)!==-1) return;
                        try{
                            const cs = window.getComputedStyle(el);
                            if(cs && cs.animationName && cs.animationName !== 'none') fades.push(el);
                        }catch(e){}
                    });
                }

                fades.forEach((el,i)=>{
                    const id = genId(el,i);
                    if(store[id]){
                        el.classList.add('no-animation');
                    } else {
                        const s = getStore(); s[id]=true; setStore(s);
                    }
                });
            }

            document.addEventListener('DOMContentLoaded', ()=>{
                processFades(document);

                // Observe dynamically added content (renderPhases etc.)
                const mo = new MutationObserver(muts=>{
                    muts.forEach(m=>{
                        m.addedNodes && m.addedNodes.forEach(node=>{
                            if(!(node instanceof HTMLElement)) return;
                            if(node.matches && node.matches('.fade')){
                                processFades(node.parentNode || document);
                            } else if(node.querySelectorAll && node.querySelectorAll('.fade').length){
                                processFades(node);
                            }
                        });
                    });
                });
                mo.observe(document.body, { childList:true, subtree:true });
            });
        })();
    </script>
</body>

<script>
    (function () {
        const sessionRaw = localStorage.getItem("mm_session");

        // No session → kick to login
        if (!sessionRaw) {
            window.location.href = "../index.html";
            return;
        }

        try {
            const session = JSON.parse(sessionRaw);

            const MAX_AGE = 1000 * 60 * 60 * 12; // 12 hours

            if (!session.time || Date.now() - session.time > MAX_AGE) {
                localStorage.removeItem("mm_session");
                window.location.href = "../index.html";
                return;
            }

            // Store globally for later UI use
            window.MM_USER = session.user;

        } catch {
            localStorage.removeItem("mm_session");
            window.location.href = "../index.html";
        }
    })();
</script>


</html>